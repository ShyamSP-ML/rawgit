<html>
<header>
    <title>This is title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0">
</header>

<body>
    CP2 Snap Ins - 
    <br/>
    
   <style type='text/css'>
	.embeddedServiceHelpButton .helpButton .uiButton { background-color: #005290; font-family: "Salesforce Sans", sans-serif; }
	.embeddedServiceHelpButton .helpButton .uiButton:focus { outline: 1px solid #005290; }
	@font-face {
	font-family: 'Salesforce Sans';
	src: url('https://www.sfdcstatic.com/system/shared/common/assets/fonts/SalesforceSans/SalesforceSans-Regular.woff') format('woff'),
	url('https://www.sfdcstatic.com/system/shared/common/assets/fonts/SalesforceSans/SalesforceSans-Regular.ttf') format('truetype');
	}
	</style>

	<script type='text/javascript' src='https://service.force.com/embeddedservice/4.1/esw.min.js'></script>
	
	<!--- CryptoJS AES Libraries --->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
	
	<script type='text/javascript'>
		
		var data = '00D4D0000008ayw!ARwAQEoWYNH9.wDhmth6k_zubHNzZA.56O2rU7uwNLfaOfdPuGfDEwkcnOGc3fhLqgpFtEqSYya_0sFIuUK1DtV.OvprA9aA';
		var key = '6262dafae944140fe4354cb8f8af25a8';
		console.log('key-----> '+key);
		var encryptedtoken = CryptoJS.AES.encrypt(data, key);
		console.log('encryptedtoken'+encryptedtoken);
		var initESW = function(gslbBaseURL) {
		embedded_svc.settings.displayHelpButton = true; //Or false
		embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'

		//embedded_svc.settings.defaultMinimizedText = '...'; //(Defaults to Chat with an Expert)
		//embedded_svc.settings.disabledMinimizedText = '...'; //(Defaults to Agent Offline)

		//embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
		//embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)

		// Settings for Live Agent
		embedded_svc.settings.avatarImgURL = '';
		embedded_svc.settings.prechatBackgroundImgURL = '';
		embedded_svc.settings.waitingStateBackgroundImgURL = '';
		embedded_svc.settings.smallCompanyLogoImgURL = '';
		//embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
		// Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
		//Returns a valid button ID.
		//};
embedded_svc.settings.extraPrechatInfo = [{
  "entityFieldMaps": [{
    "doCreate": false,
    "doFind": true,
    "fieldName": "LastName",
    "isExactMatch": true,
    "label": "Last Name"
  }, {
    "doCreate": false,
    "doFind": true,
    "fieldName": "Email",
    "isExactMatch": true,
    "label": "Email"
  }],
  "entityName": "Contact"
}];
	
			
embedded_svc.settings.prepopulatedPrechatFields = {
    FirstName: "Bobby",
    LastName: "Brown",
    Email: encryptedtoken,
    Subject: "Hello"
};
		embedded_svc.settings.enabledFeatures = ['LiveAgent'];
		embedded_svc.settings.entryFeature = 'LiveAgent';
		//embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields

		embedded_svc.init('https://mlc--DEV35.cs71.my.salesforce.com', 'https://dev35-manulife-cdn.cs71.force.com/liveagent', gslbBaseURL, '00D4D0000008ayw', 'SnapInCP2', { 
			baseLiveAgentContentURL: 'https://c.la3-c1cs-phx.salesforceliveagent.com/content', 
			deploymentId: '5724D0000008OM1', 
			buttonId: '5734D0000008OSE', 
			baseLiveAgentURL: 'https://d.la3-c1cs-phx.salesforceliveagent.com/chat', 
			eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I4D0000004C9DUAU_162045cf39c'}); 
		};
		if (!window.embedded_svc) { 
			var s = document.createElement('script'); s.setAttribute('src', 'https://mlc--DEV35.cs71.my.salesforce.com/embeddedservice/3.0/esw.min.js'); 
			s.onload = function() { 
				initESW(null); 
			}; 
			document.body.appendChild(s); 
		} else { 
			initESW('https://service.force.com'); 
		}
	</script>
</body>

</html>
